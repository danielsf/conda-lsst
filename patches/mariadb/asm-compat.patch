diff --git patches/asm-compat.patch patches/asm-compat.patch
new file mode 100644
index 0000000..feb129f
--- /dev/null
+++ patches/asm-compat.patch
@@ -0,0 +1,20 @@
+--- mariadb/include/my_context.h        2016-01-25 10:06:03.000000000 -0800
++++ mariadb/include/my_context.h        2016-01-25 10:06:21.000000000 -0800
+@@ -25,17 +25,7 @@
+   (This particular implementation uses Posix ucontext swapcontext().)
+ */
+
+-#ifdef __WIN__
+-#define MY_CONTEXT_USE_WIN32_FIBERS 1
+-#elif defined(__GNUC__) && __GNUC__ >= 3 && defined(__x86_64__) && !defined(__ILP32__)
+-#define MY_CONTEXT_USE_X86_64_GCC_ASM
+-#elif defined(__GNUC__) && __GNUC__ >= 3 && defined(__i386__)
+-#define MY_CONTEXT_USE_I386_GCC_ASM
+-#elif defined(HAVE_UCONTEXT)
+ #define MY_CONTEXT_USE_UCONTEXT
+-#else
+-#define MY_CONTEXT_DISABLE
+-#endif
+
+ #ifdef MY_CONTEXT_USE_WIN32_FIBERS
+ struct my_context {
